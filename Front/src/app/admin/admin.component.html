<div class="d-flex flex-column flex-root app-root" id="kt_app_root">
  <!--begin::Page-->
  <div class="app-page flex-column flex-column-fluid" id="kt_app_page">
    <!--begin::Wrapper-->
    <div class="app-wrapper d-flex" id="kt_app_wrapper">
      <!--begin::Wrapper container-->
      <div class="app-container container-fluid">
        <!--begin::Main-->
        <div class="app-main flex-column flex-row-fluid" id="kt_app_main">
          <!--begin::Content wrapper-->
          <div class="d-flex flex-column flex-column-fluid">
            <!--begin::Toolbar-->
            <div id="kt_app_toolbar" class="app-toolbar">
              <!--begin::Toolbar container-->
              <div class="d-flex flex-stack flex-row-fluid">
                <!--begin::Toolbar wrapper-->
                <div class="d-flex flex-column flex-row-fluid">
                  <!--begin::Page title-->
                  <div class="page-title d-flex align-items-center me-3">
                    <!--begin::Title-->
                    <h1
                      class="page-heading d-flex text-gray-900 fw-bolder fs-1 flex-column justify-content-center my-0"
                    >
                      liste des utilisateurs
                    </h1>
                    <!--end::Title-->
                  </div>
                  <!--end::Page title-->
                </div>
                <!--end::Toolbar wrapper-->
              </div>
              <!--end::Toolbar container-->
            </div>
            <!--end::Toolbar-->

            <!--begin::Content-->
            <div id="kt_app_content" class="app-content">
              <!--begin::Card-->
              <div class="card">
                <!--begin::Card header-->
                <div class="card-header border-0 pt-6">
                  <!--begin::Card title-->
                  <div class="card-title">
                    <!--begin::Search-->
                    <div
                      class="d-flex align-items-center position-relative my-1"
                    >
                      <i
                        class="ki-duotone ki-magnifier fs-3 position-absolute ms-5"
                        ><span class="path1"></span><span class="path2"></span
                      ></i>
                      <input
                        type="text"
                        data-kt-user-table-filter="search"
                        class="form-control form-control-solid w-250px ps-13"
                        placeholder="Search user"
                      />
                    </div>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <!--end::Search-->
                    <div
                      _ngcontent-gan-c56=""
                      data-kt-user-table-toolbar="base"
                      class="d-flex justify-content-end"
                    >
                      <button type="button" class="btn btn-light-primary me-3">
                        <i class="bi bi-funnel-fill fs-4 me-2"></i> Filtrer
                      </button>

                      <div
                        data-kt-menu="true"
                        class="menu menu-sub menu-sub-dropdown"
                      >
                        <!-- Contenu du menu -->
                      </div>

                      <button type="button" class="btn btn-light-primary me-3">
                        <i
                          class="bi bi-file-earmark-arrow-up-fill fs-4 me-2"
                        ></i>
                        Exporter
                      </button>

                      <button
                        type="button"
                        class="btn btn-primary"
                        data-bs-toggle="modal"
                        [routerLink]="['/add-user']"
                      >
                        <i class="bi bi-plus-lg fs-4 me-2"></i> Ajouter
                      </button>
                    </div>
                  </div>
                  <!--begin::Card title-->

                  <!--begin::Card toolbar-->
                  <div class="card-toolbar">
                    <!--begin::Toolbar-->
                    <div
                      class="d-flex justify-content-end"
                      data-kt-user-table-toolbar="base"
                    ></div>
                  </div>
                  <!--end::Card toolbar-->
                </div>
                <!--end::Card header-->

                <!--begin::Card body-->
                <div class="card-body py-4">
                  <!--begin::Table-->
                  <table
                    class="table align-middle table-row-dashed fs-6 gy-5"
                    id="kt_table_users"
                  >
                    <thead>
                      <tr
                        class="text-start text-muted fw-bold fs-7 text-uppercase gs-0"
                      >
                        <th class="w-10px pe-2">
                          <div
                            class="form-check form-check-sm form-check-custom form-check-solid me-3"
                          >
                            <input
                              class="form-check-input"
                              type="checkbox"
                              data-kt-check="true"
                              data-kt-check-target="#kt_table_users .form-check-input"
                              value="1"
                            />
                          </div>
                        </th>
                        <th class="min-w-125px">Id</th>

                        <th class="min-w-125px">Email</th>
                        <th class="min-w-125px">Role</th>
                        <th class="min-w-125px">activé</th>

                        <th class="text-end min-w-100px">Actions</th>
                      </tr>
                    </thead>
                    <tbody class="text-gray-600 fw-semibold">
                      <tr *ngFor="let n of users">
                        <ng-container
                          *ngIf="
                            n.role == 'candidat' ||
                            n.role == 'recruteur' ||
                            n.role == 'admin'
                          "
                        >
                          <td>
                            <div
                              class="form-check form-check-sm form-check-custom form-check-solid"
                            >
                              <input
                                class="form-check-input"
                                type="checkbox"
                                value="1"
                              />
                            </div>
                          </td>
                          <td>{{ n.id }}</td>

                          <td>{{ n.email }}</td>
                          <td *ngIf="n.role == 'candidat'">candidat</td>
                          <td *ngIf="n.role == 'recruteur'">recruteur</td>
                          <td *ngIf="n.role == 'admin'">admin</td>
                          <td>{{ n.verified }}</td>
                          <td class="text-end">
                            <Button
                              (click)="block(n.email)"
                              class="btn btn-light btn-active-light-primary btn-flex btn-center btn-sm"
                              data-kt-menu-trigger="click"
                            >
                              <i class="bi bi-lock"></i> Bloquer
                            </Button>

                            <Button
                              (click)="unblock(n.email)"
                              class="btn btn-light btn-active-light-primary btn-flex btn-center btn-sm"
                              data-kt-menu-trigger="click"
                            >
                              <i class="bi bi-unlock"></i> Débloquer
                            </Button>

                            <Button
                              (click)="changeRole(n.email, n.role)"
                              class="btn btn-light btn-active-light-primary btn-flex btn-center btn-sm"
                              data-kt-menu-trigger="click"
                            >
                              <i class="bi bi-person-plus"></i> Changer de rôle
                            </Button>

                            <Button
                              (click)="toggleModal(n.id)"
                              class="btn btn-light btn-active-light-primary btn-flex btn-center btn-sm"
                              data-kt-menu-trigger="click"
                            >
                              <i class="bi bi-trash"></i> Supprimer
                            </Button>
                          </td>
                        </ng-container>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <!--end::Card body-->
              </div>
              <!--end::Card-->
            </div>
            <!--end::Content-->
          </div>
        </div>
        <!--end:::Main-->
      </div>
      <!--end::Wrapper container-->
    </div>
    <!--end::Wrapper-->
  </div>
  <!--end::Page-->
</div>

<!--begin::Scrolltop-->
<div id="kt_scrolltop" class="scrolltop" data-kt-scrolltop="true">
  <i class="ki-duotone ki-arrow-up"
    ><span class="path1"></span><span class="path2"></span
  ></i>
</div>
<!--end::Scrolltop-->

<!--begin::Modals-->
<div
  class="swal2-container swal2-center swal2-backdrop-show"
  style="overflow-y: auto"
  *ngIf="showModal"
>
  <div
    aria-labelledby="swal2-title"
    aria-describedby="swal2-html-container"
    class="swal2-popup swal2-modal swal2-icon-warning swal2-show"
    tabindex="-1"
    role="dialog"
    aria-live="assertive"
    aria-modal="true"
    style="display: grid"
  >
    <div class="swal2-icon swal2-warning swal2-icon-show" style="display: flex">
      <div class="swal2-icon-content">!</div>
    </div>
    <div
      class="swal2-html-container"
      id="swal2-html-container"
      style="display: block"
    >
      Confirmation de Suppression
    </div>
    <div class="swal2-actions" style="display: flex">
      <div class="swal2-loader"></div>
      <button
        type="button"
        class="swal2-confirm btn fw-bold btn-danger"
        aria-label=""
        style="display: inline-block"
        (click)="deleteItem()"
        (click)="closeModal()"
      >
        oui!</button
      ><button
        type="button"
        class="swal2-cancel btn fw-bold btn-active-light-primary"
        aria-label=""
        style="display: inline-block"
        (click)="closeModal()"
      >
        Non,annuler
      </button>
    </div>
  </div>
</div>
<!--end::Modals-->
